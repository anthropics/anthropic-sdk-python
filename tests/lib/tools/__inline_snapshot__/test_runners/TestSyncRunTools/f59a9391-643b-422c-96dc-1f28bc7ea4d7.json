[
  {
    "request": {
      "method": "POST",
      "url": "https://api.anthropic.com/v1/messages?beta=true",
      "headers": {
        "host": "api.anthropic.com",
        "accept-encoding": "gzip, deflate",
        "connection": "keep-alive",
        "x-stainless-timeout": "600",
        "accept": "application/json",
        "content-type": "application/json",
        "user-agent": "Anthropic/Python 0.82.0",
        "x-stainless-lang": "python",
        "x-stainless-package-version": "0.82.0",
        "x-stainless-os": "MacOS",
        "x-stainless-arch": "arm64",
        "x-stainless-runtime": "CPython",
        "x-stainless-runtime-version": "3.9.18",
        "x-stainless-async": "false",
        "anthropic-version": "2023-06-01",
        "x-stainless-helper": "BetaToolRunner",
        "anthropic-beta": "structured-outputs-2025-12-15",
        "x-stainless-retry-count": "0",
        "x-stainless-read-timeout": "600",
        "content-length": "598"
      },
      "body": {
        "max_tokens": 1024,
        "messages": [
          {
            "role": "user",
            "content": "What's the weather in SF in Celsius?"
          }
        ],
        "model": "claude-haiku-4-5",
        "tools": [
          {
            "name": "get_weather",
            "description": "Lookup the weather for a given city in either celsius or fahrenheit",
            "input_schema": {
              "additionalProperties": false,
              "properties": {
                "location": {
                  "description": "The city and state, e.g. San Francisco, CA",
                  "title": "Location",
                  "type": "string"
                },
                "units": {
                  "description": "Unit for the output, either 'c' for celsius or 'f' for fahrenheit",
                  "enum": [
                    "c",
                    "f"
                  ],
                  "title": "Units",
                  "type": "string"
                }
              },
              "required": [
                "location",
                "units"
              ],
              "type": "object"
            }
          }
        ]
      }
    },
    "response": {
      "status_code": 200,
      "headers": {
        "content-type": "application/json",
        "connection": "keep-alive",
        "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
        "server": "cloudflare",
        "cf-cache-status": "DYNAMIC",
        "x-robots-tag": "none",
        "content-security-policy": "default-src 'none'; frame-ancestors 'none'"
      },
      "body": {
        "model": "claude-haiku-4-5-20251001",
        "id": "msg_01QCEBW49MBPHFuFwMDoFtPP",
        "type": "message",
        "role": "assistant",
        "content": [
          {
            "type": "tool_use",
            "id": "toolu_01GHndag5wQmbzNihYmV2UBj",
            "name": "get_weather",
            "input": {
              "location": "San Francisco, CA",
              "units": "c"
            },
            "caller": {
              "type": "direct"
            }
          }
        ],
        "stop_reason": "tool_use",
        "stop_sequence": null,
        "usage": {
          "input_tokens": 659,
          "cache_creation_input_tokens": 0,
          "cache_read_input_tokens": 0,
          "cache_creation": {
            "ephemeral_5m_input_tokens": 0,
            "ephemeral_1h_input_tokens": 0
          },
          "output_tokens": 74,
          "service_tier": "standard",
          "inference_geo": "not_available"
        }
      }
    }
  },
  {
    "request": {
      "method": "POST",
      "url": "https://api.anthropic.com/v1/messages?beta=true",
      "headers": {
        "host": "api.anthropic.com",
        "accept-encoding": "gzip, deflate",
        "connection": "keep-alive",
        "x-stainless-timeout": "600",
        "accept": "application/json",
        "content-type": "application/json",
        "user-agent": "Anthropic/Python 0.82.0",
        "x-stainless-lang": "python",
        "x-stainless-package-version": "0.82.0",
        "x-stainless-os": "MacOS",
        "x-stainless-arch": "arm64",
        "x-stainless-runtime": "CPython",
        "x-stainless-runtime-version": "3.9.18",
        "x-stainless-async": "false",
        "anthropic-version": "2023-06-01",
        "x-stainless-helper": "BetaToolRunner",
        "anthropic-beta": "structured-outputs-2025-12-15",
        "x-stainless-retry-count": "0",
        "x-stainless-read-timeout": "600",
        "content-length": "789"
      },
      "body": {
        "max_tokens": 1024,
        "messages": [
          {
            "role": "user",
            "content": "What's the weather in SF in Celsius?"
          },
          {
            "role": "user",
            "content": [
              {
                "tool_use_id": "toolu_01GHndag5wQmbzNihYmV2UBj",
                "content": "The weather in San Francisco, CA is currently sunny with a temperature of 20Â°C.",
                "type": "tool_result"
              }
            ]
          }
        ],
        "model": "claude-haiku-4-5",
        "tools": [
          {
            "name": "get_weather",
            "description": "Lookup the weather for a given city in either celsius or fahrenheit",
            "input_schema": {
              "additionalProperties": false,
              "properties": {
                "location": {
                  "description": "The city and state, e.g. San Francisco, CA",
                  "title": "Location",
                  "type": "string"
                },
                "units": {
                  "description": "Unit for the output, either 'c' for celsius or 'f' for fahrenheit",
                  "enum": [
                    "c",
                    "f"
                  ],
                  "title": "Units",
                  "type": "string"
                }
              },
              "required": [
                "location",
                "units"
              ],
              "type": "object"
            }
          }
        ]
      }
    },
    "response": {
      "status_code": 400,
      "headers": {
        "content-type": "application/json",
        "content-length": "316",
        "connection": "keep-alive",
        "x-should-retry": "false",
        "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
        "server": "cloudflare",
        "cf-cache-status": "DYNAMIC",
        "x-robots-tag": "none",
        "content-security-policy": "default-src 'none'; frame-ancestors 'none'"
      },
      "body": {
        "type": "error",
        "error": {
          "type": "invalid_request_error",
          "message": "messages.0.content.1: unexpected `tool_use_id` found in `tool_result` blocks: toolu_01GHndag5wQmbzNihYmV2UBj. Each `tool_result` block must have a corresponding `tool_use` block in the previous message."
        },
        "request_id": "req_011CYHyk9NPsBYeGbC9LuDNK"
      }
    }
  }
]
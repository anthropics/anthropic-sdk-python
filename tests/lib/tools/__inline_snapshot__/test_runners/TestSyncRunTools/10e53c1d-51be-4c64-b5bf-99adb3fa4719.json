[
  {
    "request": {
      "method": "POST",
      "url": "https://api.anthropic.com/v1/messages?beta=true",
      "headers": {
        "host": "api.anthropic.com",
        "accept-encoding": "gzip, deflate",
        "connection": "keep-alive",
        "x-stainless-timeout": "600",
        "accept": "application/json",
        "content-type": "application/json",
        "user-agent": "Anthropic/Python 0.82.0",
        "x-stainless-lang": "python",
        "x-stainless-package-version": "0.82.0",
        "x-stainless-os": "MacOS",
        "x-stainless-arch": "arm64",
        "x-stainless-runtime": "CPython",
        "x-stainless-runtime-version": "3.9.18",
        "x-stainless-async": "false",
        "anthropic-version": "2023-06-01",
        "x-stainless-helper": "BetaToolRunner",
        "anthropic-beta": "structured-outputs-2025-12-15",
        "x-stainless-retry-count": "0",
        "x-stainless-read-timeout": "600",
        "content-length": "588"
      },
      "body": {
        "max_tokens": 1024,
        "messages": [
          {
            "role": "user",
            "content": "What is the weather in SF?"
          }
        ],
        "model": "claude-haiku-4-5",
        "tools": [
          {
            "name": "get_weather",
            "description": "Lookup the weather for a given city in either celsius or fahrenheit",
            "input_schema": {
              "additionalProperties": false,
              "properties": {
                "location": {
                  "description": "The city and state, e.g. San Francisco, CA",
                  "title": "Location",
                  "type": "string"
                },
                "units": {
                  "description": "Unit for the output, either 'c' for celsius or 'f' for fahrenheit",
                  "enum": [
                    "c",
                    "f"
                  ],
                  "title": "Units",
                  "type": "string"
                }
              },
              "required": [
                "location",
                "units"
              ],
              "type": "object"
            }
          }
        ]
      }
    },
    "response": {
      "status_code": 200,
      "headers": {
        "content-type": "application/json",
        "connection": "keep-alive",
        "x-robots-tag": "none",
        "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
        "server": "cloudflare",
        "content-security-policy": "default-src 'none'; frame-ancestors 'none'",
        "cf-cache-status": "DYNAMIC"
      },
      "body": {
        "model": "claude-haiku-4-5-20251001",
        "id": "msg_01RMQBcKf2dxTq6qfi31BBTz",
        "type": "message",
        "role": "assistant",
        "content": [
          {
            "type": "tool_use",
            "id": "toolu_01A9HHF5Ezy3oBrKmSgfASm9",
            "name": "get_weather",
            "input": {
              "location": "San Francisco, CA",
              "units": "f"
            },
            "caller": {
              "type": "direct"
            }
          }
        ],
        "stop_reason": "tool_use",
        "stop_sequence": null,
        "usage": {
          "input_tokens": 656,
          "cache_creation_input_tokens": 0,
          "cache_read_input_tokens": 0,
          "cache_creation": {
            "ephemeral_5m_input_tokens": 0,
            "ephemeral_1h_input_tokens": 0
          },
          "output_tokens": 74,
          "service_tier": "standard",
          "inference_geo": "not_available"
        }
      }
    }
  },
  {
    "request": {
      "method": "POST",
      "url": "https://api.anthropic.com/v1/messages?beta=true",
      "headers": {
        "host": "api.anthropic.com",
        "accept-encoding": "gzip, deflate",
        "connection": "keep-alive",
        "x-stainless-timeout": "600",
        "accept": "application/json",
        "content-type": "application/json",
        "user-agent": "Anthropic/Python 0.82.0",
        "x-stainless-lang": "python",
        "x-stainless-package-version": "0.82.0",
        "x-stainless-os": "MacOS",
        "x-stainless-arch": "arm64",
        "x-stainless-runtime": "CPython",
        "x-stainless-runtime-version": "3.9.18",
        "x-stainless-async": "false",
        "anthropic-version": "2023-06-01",
        "x-stainless-helper": "BetaToolRunner",
        "anthropic-beta": "structured-outputs-2025-12-15",
        "x-stainless-retry-count": "0",
        "x-stainless-read-timeout": "600",
        "content-length": "950"
      },
      "body": {
        "max_tokens": 1024,
        "messages": [
          {
            "role": "user",
            "content": "What is the weather in SF?"
          },
          {
            "role": "assistant",
            "content": [
              {
                "id": "toolu_01A9HHF5Ezy3oBrKmSgfASm9",
                "input": {
                  "location": "San Francisco, CA",
                  "units": "f"
                },
                "name": "get_weather",
                "type": "tool_use",
                "caller": {
                  "type": "direct"
                }
              }
            ]
          },
          {
            "role": "user",
            "content": [
              {
                "type": "tool_result",
                "tool_use_id": "toolu_01A9HHF5Ezy3oBrKmSgfASm9",
                "content": "RuntimeError('Unexpected error, try again')",
                "is_error": true
              }
            ]
          }
        ],
        "model": "claude-haiku-4-5",
        "tools": [
          {
            "name": "get_weather",
            "description": "Lookup the weather for a given city in either celsius or fahrenheit",
            "input_schema": {
              "additionalProperties": false,
              "properties": {
                "location": {
                  "description": "The city and state, e.g. San Francisco, CA",
                  "title": "Location",
                  "type": "string"
                },
                "units": {
                  "description": "Unit for the output, either 'c' for celsius or 'f' for fahrenheit",
                  "enum": [
                    "c",
                    "f"
                  ],
                  "title": "Units",
                  "type": "string"
                }
              },
              "required": [
                "location",
                "units"
              ],
              "type": "object"
            }
          }
        ]
      }
    },
    "response": {
      "status_code": 200,
      "headers": {
        "content-type": "application/json",
        "connection": "keep-alive",
        "x-robots-tag": "none",
        "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
        "server": "cloudflare",
        "content-security-policy": "default-src 'none'; frame-ancestors 'none'",
        "cf-cache-status": "DYNAMIC"
      },
      "body": {
        "model": "claude-haiku-4-5-20251001",
        "id": "msg_01GJyhkguJrrqMbZNzEybYFL",
        "type": "message",
        "role": "assistant",
        "content": [
          {
            "type": "text",
            "text": "I apologize, but I'm getting an error when trying to fetch the weather for San Francisco. This appears to be a temporary issue with the weather service. Could you try again in a moment, or let me know if you'd like me to attempt to retrieve the weather for a different location?"
          }
        ],
        "stop_reason": "end_turn",
        "stop_sequence": null,
        "usage": {
          "input_tokens": 760,
          "cache_creation_input_tokens": 0,
          "cache_read_input_tokens": 0,
          "cache_creation": {
            "ephemeral_5m_input_tokens": 0,
            "ephemeral_1h_input_tokens": 0
          },
          "output_tokens": 63,
          "service_tier": "standard",
          "inference_geo": "not_available"
        }
      }
    }
  }
]